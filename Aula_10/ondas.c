#include "stm32f4xx_dac.h"

u16 sin[360] =
	{2047,2082,2118,2154,2189,2225,2260,2296,2331,2367,
	 2402,2437,2472,2507,2542,2576,2611,2645,2679,2713,
	 2747,2780,2813,2846,2879,2912,2944,2976,3008,3039,
	 3070,3101,3131,3161,3191,3221,3250,3278,3307,3335,
	 3362,3389,3416,3443,3468,3494,3519,3544,3568,3591,
	 3615,3637,3660,3681,3703,3723,3744,3763,3782,3801,
	 3819,3837,3854,3870,3886,3902,3917,3931,3944,3958,
	 3970,3982,3993,4004,4014,4024,4033,4041,4049,4056,
	 4062,4068,4074,4078,4082,4086,4089,4091,4092,4093,
	 4094,4093,4092,4091,4089,4086,4082,4078,4074,4068,
	 4062,4056,4049,4041,4033,4024,4014,4004,3993,3982,
	 3970,3958,3944,3931,3917,3902,3886,3870,3854,3837,
	 3819,3801,3782,3763,3744,3723,3703,3681,3660,3637,
	 3615,3591,3568,3544,3519,3494,3468,3443,3416,3389,
	 3362,3335,3307,3278,3250,3221,3191,3161,3131,3101,
	 3070,3039,3008,2976,2944,2912,2879,2846,2813,2780,
	 2747,2713,2679,2645,2611,2576,2542,2507,2472,2437,
	 2402,2367,2331,2296,2260,2225,2189,2154,2118,2082,
	 2047,2011,1975,1939,1904,1868,1833,1797,1762,1726,
	 1691,1656,1621,1586,1551,1517,1482,1448,1414,1380,
	 1346,1313,1280,1247,1214,1181,1149,1117,1085,1054,
	 1023, 992, 962, 932, 902, 872, 843, 815, 786, 758,
	  731, 704, 677, 650, 625, 599, 574, 549, 525, 502,
	  478, 456, 433, 412, 390, 370, 349, 330, 311, 292,
	  274, 256, 239, 223, 207, 191, 176, 162, 149, 135,
	  123, 111, 100,  89,  79,  69,  60,  52,  44,  37,
	   31,  25,  19,  15,  11,   7,   4,   2,   1,   0,
	    0,   0,   1,   2,   4,   7,  11,  15,  19,  25,
	   31,  37,  44,  52,  60,  69,  79,  89, 100, 111,
	  123, 135, 149, 162, 176, 191, 207, 223, 239, 256,
	  274, 292, 311, 330, 349, 370, 390, 412, 433, 456,
	  478, 502, 525, 549, 574, 599, 625, 650, 677, 704,
	  731, 758, 786, 815, 843, 872, 902, 932, 962, 992,
	 1023,1054,1085,1117,1149,1181,1214,1247,1280,1313,
	 1346,1380,1414,1448,1482,1517,1551,1586,1621,1656,
	 1691,1726,1762,1797,1833,1868,1904,1939,1975,2011,
	 2047};

u16 seno(u16 i)
{

	if(i < 360)
	{
		return sin[i];
	} else {
		return 0;
	}
}

int triangular(int x,int up)
{
    DAC_SetChannel1Data(DAC_Align_12b_R,x);
	if(x > 4095)
	{
		up = 0;
	}
	if(x < 0)
	{
		up = 1;
	}
	if(up)
		return x += 1;
	else
		x -= 1;
}

int dentedeserra(int x)
{
	DAC_SetChannel2Data(DAC_Align_12b_R,x);
	if(x > 4095)
	{
		return x = 1;
	}
	else {
		return x++;
	}
}
